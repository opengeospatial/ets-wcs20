<?xml version="1.0" encoding="UTF-8"?>
<ctl:package xmlns:ctl="http://www.occamlab.com/ctl" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ows="http://www.opengis.net/ows/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:wcs="http://www.opengis.net/wcs/2.0" xmlns:wcps="http://www.opengis.net/wcps/1.0/" xmlns:proc="http://www.opengis.net/wcps/1.0/proc" xmlns:ctlp="http://www.occamlab.com/te/parsers" xmlns:parsers="http://www.occamlab.com/te/parsers" xmlns:wcs2="http://www.opengis.net/wcs/2.0" xmlns:wcseo="http://www.opengis.net/wcseo/1.0" xmlns:sch="http://purl.oclc.org/dsdl/schematron" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xs="http://www.w3.org/2001/XMLSchema">
	<ctl:test name="wcs2:get-int-main">
		<ctl:param name="url"/>
		<ctl:assertion>Test WCS 2.0 Interpolation extension.</ctl:assertion>
		<ctl:code>
			<xsl:variable name="Capabilities">
				<ctl:request>
					<ctl:url>
						<xsl:value-of select="$url"/>
					</ctl:url>
					<ctl:method>get</ctl:method>
					<ctl:param name="SERVICE">WCS</ctl:param>
					<ctl:param name="VERSION">2.0.1</ctl:param>
					<ctl:param name="REQUEST">GetCapabilities</ctl:param>
					<ctlp:XMLValidatingParser>
						<ctlp:schemas>
							<ctlp:schema type="url">http://schemas.opengis.net/wcs/2.0/wcsAll.xsd</ctlp:schema>
						</ctlp:schemas>
					</ctlp:XMLValidatingParser>
				</ctl:request>
			</xsl:variable>
			<xsl:variable name="SupportsGML">
				<xsl:for-each select="$Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']">
					<xsl:if test=". = 'http://www.opengis.net/spec/GMLCOV/1.0/conf/gml'">
						<xsl:value-of select="'true'"/>
					</xsl:if>
				</xsl:for-each>
			</xsl:variable>

			<xsl:variable name="CoverageId">
						<xsl:value-of select="$Capabilities//*[local-name()='CoverageSummary'][//@dimensions=2][1]/*[local-name()='CoverageId']"/>
			</xsl:variable>
			<xsl:variable name="DescribeCoverage">
				<ctl:request>
					<ctl:url>
						<xsl:value-of select="$url"/>
					</ctl:url>
					<ctl:method>get</ctl:method>
					<ctl:param name="SERVICE">WCS</ctl:param>
					<ctl:param name="VERSION">2.0.1</ctl:param>
					<ctl:param name="REQUEST">DescribeCoverage</ctl:param>
					<ctl:param name="CoverageId">
						<xsl:value-of select="$CoverageId"/>
					</ctl:param>
					<ctlp:XMLValidatingParser>
						<ctlp:schemas>
							<ctlp:schema type="url">http://schemas.opengis.net/wcs/2.0/wcsAll.xsd</ctlp:schema>
						</ctlp:schemas>
					</ctlp:XMLValidatingParser>
				</ctl:request>
			</xsl:variable>
			<xsl:variable name="axisLabels">
				<xsl:value-of select="tokenize(string($DescribeCoverage//*[local-name()='domainSet']//*[local-name()='axisLabels']),'\s+')"/>
			</xsl:variable>
			<xsl:variable name="InterpolationSupported">
				<xsl:value-of select="$Capabilities//*[local-name()='ServiceMetadata']//*[local-name()='InterpolationMetadata']/*[local-name()='InterpolationSupported']"/>
			</xsl:variable>
			<xsl:choose>
				<xsl:when test="not(empty($DescribeCoverage))">

					<ctl:call-test name="wcs2:get-int-req5-9">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-per-axis')">
					<ctl:call-test name="wcs2:get-int-req10-18">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-nearest-neighbor')">
					<ctl:call-test name="wcs2:get-int-req19">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-linear')">
					<ctl:call-test name="wcs2:get-int-req21">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-quadratic')">
					<ctl:call-test name="wcs2:get-int-req23">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-cubic')">
					<ctl:call-test name="wcs2:get-int-req25">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-lost-area')">
					<ctl:call-test name="wcs2:get-int-req27">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-barycentric')">
					<ctl:call-test name="wcs2:get-int-req29">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[FAILURE] CoverageDescription Parsing or validation errors.</ctl:message>
					<ctl:fail/>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<ctl:test name="wcs2:GetCoverage_not_exception">
		<ctl:param name="GetCoverage"/>
		<ctl:assertion>check getcoverage result.</ctl:assertion>
		<ctl:code>
			<xsl:if test="not(empty($GetCoverage//*[local-name()='Exception']))">
				<ctl:message>[FAILURE] The result should not contain an ows:Exception.</ctl:message>
				<ctl:fail/>
			</xsl:if>
		</ctl:code>
	</ctl:test>
	<ctl:test name="wcs2:GetCoverage_exception">
		<ctl:param name="GetCoverage"/>
		<ctl:assertion>check getcoverage result.</ctl:assertion>
		<ctl:code>
			<xsl:if test="empty($GetCoverage//*[local-name()='Exception'])">
				<ctl:message>[FAILURE] The result should contain an ows:Exception.</ctl:message>
				<ctl:fail/>
			</xsl:if>
		</ctl:code>
	</ctl:test>
	<!--req1-->
	<ctl:test name="wcs2:get-int-req1">
		<ctl:param name="Capabilities"/>
		<ctl:assertion>Req1:Test interpolation extension identifier.</ctl:assertion>
		<ctl:code>
			<xsl:if test="not(contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation') )">
				<ctl:message>[FAILURE] Send a GetCapabilities request to server under test, verify that the response contains a Profile element with http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation.</ctl:message>
				<ctl:fail/>
			</xsl:if>
		</ctl:code>
	</ctl:test>
	<!--req2-->
	<ctl:test name="wcs2:get-int-req2">
		<ctl:param name="Capabilities"/>
		<ctl:assertion>Req1:Test Capabilities.</ctl:assertion>
		<ctl:code>
			<xsl:if test="empty($Capabilities//*[local-name()='ServiceMetadata']//*[local-name()='InterpolationMetadata'])">
				<ctl:message>[FAILURE] Capabilities document does not contain InterpolationMetadata element.</ctl:message>
				<ctl:fail/>
			</xsl:if>
		</ctl:code>
	</ctl:test>
	<!--req3-->
	<ctl:test name="wcs2:get-int-req3">
		<ctl:param name="Capabilities"/>
		<ctl:assertion>Req3:Test wcsServiceMetadata.</ctl:assertion>
		<ctl:code>
			<xsl:if test="empty($Capabilities//*[local-name()='ServiceMetadata']//*[local-name()='InterpolationMetadata'/*[local-name()='InterpolationSupported'])">
				<ctl:message>[FAILURE] Capabilities document does not contain InterpolationSupported element.</ctl:message>
				<ctl:fail/>
			</xsl:if>
		</ctl:code>
	</ctl:test>
	<!--req4-->
	<ctl:test name="wcs2:get-int-req4">
		<ctl:param name="Capabilities"/>
		<ctl:assertion>Req4:Test wcsServiceMetadata-interpolationMethods.</ctl:assertion>
		<ctl:code>
			<xsl:for-each select="$Capabilities//*[local-name()='ServiceMetadata']/*[local-name()='InterpolationMetadata']/*[local-name()='InterpolationSupported']">
				<ctl:message xmlns:ctl="http://www.occamlab.com/ctl" select="concat('[MESSAGE]test ',.)"/>
				<xsl:variable name="InterpolationSupported">
					<ctl:request>
						<ctl:url>
							<xsl:value-of select="."/>
						</ctl:url>
						<ctl:method>get</ctl:method>
						<ctlp:XMLValidatingParser>
							<ctlp:schemas>
								<ctlp:schema type="resource">http://schemas.opengis.net/wcs/2.0/wcsAll.xsd</ctlp:schema>
							</ctlp:schemas>
						</ctlp:XMLValidatingParser>
					</ctl:request>
				</xsl:variable>
				<xsl:if test="string-length($InterpolationSupported)=0">
					<ctl:message>[FAILURE] Parsing or validation errors.</ctl:message>
					<ctl:fail/>
				</xsl:if>
			</xsl:for-each>
		</ctl:code>
	</ctl:test>
	<!--req5-10-->
	<ctl:test name="wcs2:get-int-req5-9">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req5:Test interpolation-GetCoverage-request.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_get-kvp/1.0')">
					<ctl:call-test name="wcs2:get-int-req7-kvp">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_post-xml/1.0')">
					<ctl:call-test name="wcs2:get-int-req8-post">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_soap/1.0')">
					<ctl:call-test name="wcs2:get-int-req9-soap">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[FAILURE] no supported protocal extensions.</ctl:message>
					<ctl:fail/>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req7-->
	<ctl:test name="wcs2:get-int-req7-kvp">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req7:Test interpolation-per-axis-GetCoverage-getkvp kvp.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:request>
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:method>get</ctl:method>
							<ctl:param name="SERVICE">WCS</ctl:param>
							<ctl:param name="VERSION">2.0.1</ctl:param>
							<ctl:param name="REQUEST">GetCoverage</ctl:param>
							<ctl:param name="CoverageId">
								<xsl:value-of select="$CoverageId"/>
							</ctl:param>
							<ctl:param name="SCALEFACTOR">2.0</ctl:param>
							<ctl:param name="interpolation">
								<xsl:value-of select="$InterpolationSupported[1]"/>
							</ctl:param>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="url">http://schemas.opengis.net/wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_not_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req8-->
	<ctl:test name="wcs2:get-int-req8">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req8:Test interpolation-per-axis-GetCoverage-xmlpost.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:request>
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:method>post</ctl:method>
							<ctl:header name="Content-type">text/xml</ctl:header>
							<ctl:body>
								<wcs:GetCoverage xmlns:wcs="http://www.opengis.net/wcs/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rsub="http://www.opengis.net/wcs/range-subsetting/1.0" xmlns:scal="http://www.opengis.net/wcs/scaling/1.0" xmlns:int="http://www.opengis.net/wcs/interpolation/1.0" service="WCS" version="2.0.1">
									<wcs:CoverageId>
										<xsl:value-of select="$CoverageId"/>
									</wcs:CoverageId>
									<wcs:Extension>
										<scal:ScaleByFactor>
											<scal:scaleFactor>2.0</scal:scaleFactor>
										</scal:ScaleByFactor>
										<int:Interpolation>
											<int:InterpolationMethod>
												<xsl:attribute name="interpolationMethod"><xsl:value-of select="$InterpolationSupported[1]"/></xsl:attribute>
											</int:InterpolationMethod>
										</int:Interpolation>
									</wcs:Extension>
								</wcs:GetCoverage>
							</ctl:body>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="resource">wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_not_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req9-->
	<ctl:test name="wcs2:get-int-req9">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req24:Test interpolation-per-axis-GetCoverage-soap.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:soap-request version="1.2" charset="UTF-8">
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:body>
								<wcs:GetCoverage xmlns:wcs="http://www.opengis.net/wcs/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rsub="http://www.opengis.net/wcs/range-subsetting/1.0" xmlns:scal="http://www.opengis.net/wcs/scaling/1.0" xmlns:int="http://www.opengis.net/wcs/interpolation/1.0" service="WCS" version="2.0.1">
									<wcs:CoverageId>
										<xsl:value-of select="$CoverageId"/>
									</wcs:CoverageId>
									<wcs:Extension>
										<scal:ScaleByFactor>
											<scal:scaleFactor>2.0</scal:scaleFactor>
										</scal:ScaleByFactor>
										<int:Interpolation>
											<int:InterpolationMethod>
												<xsl:attribute name="interpolationMethod"><xsl:value-of select="$InterpolationSupported[1]"/></xsl:attribute>
											</int:InterpolationMethod>
										</int:Interpolation>
									</wcs:Extension>
								</wcs:GetCoverage>
							</ctl:body>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="resource">wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:soap-request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_not_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req10-->
	<ctl:test name="wcs2:get-int-req10-18">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req10:Test interpolation-per-axis identifier.</ctl:assertion>
		<ctl:code>
			<xsl:if test="not(contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-per-axis') )">
				<ctl:message>[FAILURE] Send a GetCapabilities request to server under test, verify that the response contains a Profile element with http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-per-axis.</ctl:message>
				<ctl:fail/>
			</xsl:if>
			<xsl:choose>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_get-kvp/1.0')">
					<ctl:call-test name="wcs2:get-int-req12-kvp">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
					<ctl:call-test name="wcs2:get-int-req14-kvp">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
					<ctl:call-test name="wcs2:get-int-req16">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_post-xml/1.0')">
					<ctl:call-test name="wcs2:get-int-req12-post">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
					<ctl:call-test name="wcs2:get-int-req14-post">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
					<ctl:call-test name="wcs2:get-int-req17">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_soap/1.0')">
					<ctl:call-test name="wcs2:get-int-req12-soap">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
					<ctl:call-test name="wcs2:get-int-req14-soap">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
					<ctl:call-test name="wcs2:get-int-req18">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[FAILURE] no supported protocal extensions.</ctl:message>
					<ctl:fail/>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req12-->
	<ctl:test name="wcs2:get-int-req12-kvp">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req12:Test Interpolation-per-axis/getCoverage mutually exclusive kvp.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:request>
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:method>get</ctl:method>
							<ctl:param name="SERVICE">WCS</ctl:param>
							<ctl:param name="VERSION">2.0.1</ctl:param>
							<ctl:param name="REQUEST">GetCoverage</ctl:param>
							<ctl:param name="CoverageId">
								<xsl:value-of select="$CoverageId"/>
							</ctl:param>
							<ctl:param name="SCALEFACTOR">2.0</ctl:param>
							<ctl:param name="interpolation">
								<xsl:value-of select="concat($axisLabels[1],':',$InterpolationSupported[1],','$axisLabels[1],':',$InterpolationSupported[1])"/>
							</ctl:param>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="url">http://schemas.opengis.net/wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req12-->
	<ctl:test name="wcs2:get-int-req12-post">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req12:Test Interpolation-per-axis/getCoverage mutually exclusive xmlpost.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:request>
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:method>post</ctl:method>
							<ctl:header name="Content-type">text/xml</ctl:header>
							<ctl:body>
								<wcs:GetCoverage xmlns:wcs="http://www.opengis.net/wcs/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rsub="http://www.opengis.net/wcs/range-subsetting/1.0" xmlns:scal="http://www.opengis.net/wcs/scaling/1.0" xmlns:int="http://www.opengis.net/wcs/interpolation/1.0" service="WCS" version="2.0.1">
									<wcs:CoverageId>
										<xsl:value-of select="$CoverageId"/>
									</wcs:CoverageId>
									<wcs:Extension>
										<scal:ScaleByFactor>
											<scal:scaleFactor>2.0</scal:scaleFactor>
										</scal:ScaleByFactor>
										<int:Interpolation>
											<int:InterpolationAxes>
												<int:InterpolationAxis>
													<xsl:attribute name="interpolationMethod"><xsl:value-of select="$InterpolationSupported[1]"/></xsl:attribute>
													<xsl:attribute name="axis"><xsl:value-of select="$axisLabels[1]"/></xsl:attribute>
												</int:InterpolationAxis>
												<int:InterpolationAxis>
													<xsl:attribute name="interpolationMethod"><xsl:value-of select="$InterpolationSupported[1]"/></xsl:attribute>
													<xsl:attribute name="axis"><xsl:value-of select="$axisLabels[1]"/></xsl:attribute>
												</int:InterpolationAxis>
											</int:InterpolationAxes>
										</int:Interpolation>
									</wcs:Extension>
								</wcs:GetCoverage>
							</ctl:body>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="resource">wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req12-->
	<ctl:test name="wcs2:get-int-req12-soap">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req12:Test Interpolation-per-axis/getCoverage mutually exclusive soap.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:soap-request version="1.2" charset="UTF-8">
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:body>
								<wcs:GetCoverage xmlns:wcs="http://www.opengis.net/wcs/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rsub="http://www.opengis.net/wcs/range-subsetting/1.0" xmlns:scal="http://www.opengis.net/wcs/scaling/1.0" xmlns:int="http://www.opengis.net/wcs/interpolation/1.0" service="WCS" version="2.0.1">
									<wcs:CoverageId>
										<xsl:value-of select="$CoverageId"/>
									</wcs:CoverageId>
									<wcs:Extension>
										<scal:ScaleByFactor>
											<scal:scaleFactor>2.0</scal:scaleFactor>
										</scal:ScaleByFactor>
										<int:Interpolation>
											<int:InterpolationAxes>
												<int:InterpolationAxis>
													<xsl:attribute name="interpolationMethod"><xsl:value-of select="$InterpolationSupported[1]"/></xsl:attribute>
													<xsl:attribute name="axis"><xsl:value-of select="$axisLabels[1]"/></xsl:attribute>
												</int:InterpolationAxis>
												<int:InterpolationAxis>
													<xsl:attribute name="interpolationMethod"><xsl:value-of select="$InterpolationSupported[1]"/></xsl:attribute>
													<xsl:attribute name="axis"><xsl:value-of select="$axisLabels[1]"/></xsl:attribute>
												</int:InterpolationAxis>
											</int:InterpolationAxes>
										</int:Interpolation>
									</wcs:Extension>
								</wcs:GetCoverage>
							</ctl:body>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="resource">wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:soap-request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req13-->
	<ctl:test name="wcs2:get-int-req13-kvp">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req13:Test interpolation-per-axis/getCoverage-axes kvp.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:request>
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:method>get</ctl:method>
							<ctl:param name="SERVICE">WCS</ctl:param>
							<ctl:param name="VERSION">2.0.1</ctl:param>
							<ctl:param name="REQUEST">GetCoverage</ctl:param>
							<ctl:param name="CoverageId">
								<xsl:value-of select="$CoverageId"/>
							</ctl:param>
							<ctl:param name="SCALEFACTOR">2.0</ctl:param>
							<ctl:param name="interpolation"> </ctl:param>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="url">http://schemas.opengis.net/wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req13-->
	<ctl:test name="wcs2:get-int-req13-post">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req13:Test interpolation-per-axis/getCoverage-axes xmlpost.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:request>
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:method>post</ctl:method>
							<ctl:header name="Content-type">text/xml</ctl:header>
							<ctl:body>
								<wcs:GetCoverage xmlns:wcs="http://www.opengis.net/wcs/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rsub="http://www.opengis.net/wcs/range-subsetting/1.0" xmlns:scal="http://www.opengis.net/wcs/scaling/1.0" xmlns:int="http://www.opengis.net/wcs/interpolation/1.0" service="WCS" version="2.0.1">
									<wcs:CoverageId>
										<xsl:value-of select="$CoverageId"/>
									</wcs:CoverageId>
									<wcs:Extension>
										<scal:ScaleByFactor>
											<scal:scaleFactor>2.0</scal:scaleFactor>
										</scal:ScaleByFactor>
										<int:Interpolation>
											<int:InterpolationAxes/>
										</int:Interpolation>
									</wcs:Extension>
								</wcs:GetCoverage>
							</ctl:body>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="resource">wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req13-->
	<ctl:test name="wcs2:get-int-req13-soap">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req13:Test interpolation-per-axis/getCoverage-axes soap.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:soap-request version="1.2" charset="UTF-8">
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:body>
								<wcs:GetCoverage xmlns:wcs="http://www.opengis.net/wcs/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rsub="http://www.opengis.net/wcs/range-subsetting/1.0" xmlns:scal="http://www.opengis.net/wcs/scaling/1.0" xmlns:int="http://www.opengis.net/wcs/interpolation/1.0" service="WCS" version="2.0.1">
									<wcs:CoverageId>
										<xsl:value-of select="$CoverageId"/>
									</wcs:CoverageId>
									<wcs:Extension>
										<scal:ScaleByFactor>
											<scal:scaleFactor>2.0</scal:scaleFactor>
										</scal:ScaleByFactor>
										<int:Interpolation>
											<int:InterpolationAxes>
												<int:InterpolationAxis/>
											</int:InterpolationAxes>
										</int:Interpolation>
									</wcs:Extension>
								</wcs:GetCoverage>
							</ctl:body>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="resource">wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:soap-request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req14-->
	<ctl:test name="wcs2:get-int-req14-kvp">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req14:Test Interpolation-per-axis/getCoverage existing axis kvp.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:request>
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:method>get</ctl:method>
							<ctl:param name="SERVICE">WCS</ctl:param>
							<ctl:param name="VERSION">2.0.1</ctl:param>
							<ctl:param name="REQUEST">GetCoverage</ctl:param>
							<ctl:param name="CoverageId">
								<xsl:value-of select="$CoverageId"/>
							</ctl:param>
							<ctl:param name="SCALEFACTOR">2.0</ctl:param>
							<ctl:param name="interpolation">
								<xsl:value-of select="concat(axis_not_exist,':',$InterpolationSupported[1],','$axisLabels[1],':',$InterpolationSupported[1])"/>
							</ctl:param>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="url">http://schemas.opengis.net/wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req14-->
	<ctl:test name="wcs2:get-int-req14-post">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req14:Test Interpolation-per-axis/getCoverage existing axis xmlpost.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:request>
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:method>post</ctl:method>
							<ctl:header name="Content-type">text/xml</ctl:header>
							<ctl:body>
								<wcs:GetCoverage xmlns:wcs="http://www.opengis.net/wcs/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rsub="http://www.opengis.net/wcs/range-subsetting/1.0" xmlns:scal="http://www.opengis.net/wcs/scaling/1.0" xmlns:int="http://www.opengis.net/wcs/interpolation/1.0" service="WCS" version="2.0.1">
									<wcs:CoverageId>
										<xsl:value-of select="$CoverageId"/>
									</wcs:CoverageId>
									<wcs:Extension>
										<scal:ScaleByFactor>
											<scal:scaleFactor>2.0</scal:scaleFactor>
										</scal:ScaleByFactor>
										<int:Interpolation>
											<int:InterpolationAxes>
												<int:InterpolationAxis>
													<xsl:attribute name="interpolationMethod"><xsl:value-of select="$InterpolationSupported[1]"/></xsl:attribute>
													<xsl:attribute name="axis">axis_not_exist</xsl:attribute>
												</int:InterpolationAxis>
												<int:InterpolationAxis>
													<xsl:attribute name="interpolationMethod"><xsl:value-of select="$InterpolationSupported[1]"/></xsl:attribute>
													<xsl:attribute name="axis"><xsl:value-of select="$axisLabels[1]"/></xsl:attribute>
												</int:InterpolationAxis>
											</int:InterpolationAxes>
										</int:Interpolation>
									</wcs:Extension>
								</wcs:GetCoverage>
							</ctl:body>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="resource">wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req14-->
	<ctl:test name="wcs2:get-int-req14-soap">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req14:Test Interpolation-per-axis/getCoverage existing axis soap.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:soap-request version="1.2" charset="UTF-8">
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:body>
								<wcs:GetCoverage xmlns:wcs="http://www.opengis.net/wcs/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rsub="http://www.opengis.net/wcs/range-subsetting/1.0" xmlns:scal="http://www.opengis.net/wcs/scaling/1.0" xmlns:int="http://www.opengis.net/wcs/interpolation/1.0" service="WCS" version="2.0.1">
									<wcs:CoverageId>
										<xsl:value-of select="$CoverageId"/>
									</wcs:CoverageId>
									<wcs:Extension>
										<scal:ScaleByFactor>
											<scal:scaleFactor>2.0</scal:scaleFactor>
										</scal:ScaleByFactor>
										<int:Interpolation>
											<int:InterpolationAxes>
												<int:InterpolationAxis>
													<xsl:attribute name="interpolationMethod"><xsl:value-of select="$InterpolationSupported[1]"/></xsl:attribute>
													<xsl:attribute name="axis">axis_not_exist</xsl:attribute>
												</int:InterpolationAxis>
												<int:InterpolationAxis>
													<xsl:attribute name="interpolationMethod"><xsl:value-of select="$InterpolationSupported[1]"/></xsl:attribute>
													<xsl:attribute name="axis"><xsl:value-of select="$axisLabels[1]"/></xsl:attribute>
												</int:InterpolationAxis>
											</int:InterpolationAxes>
										</int:Interpolation>
									</wcs:Extension>
								</wcs:GetCoverage>
							</ctl:body>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="resource">wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:soap-request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req16-->
	<ctl:test name="wcs2:get-int-req16">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req16:Test interpolation-per-axis getCoverage-getkvp kvp.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:request>
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:method>get</ctl:method>
							<ctl:param name="SERVICE">WCS</ctl:param>
							<ctl:param name="VERSION">2.0.1</ctl:param>
							<ctl:param name="REQUEST">GetCoverage</ctl:param>
							<ctl:param name="CoverageId">
								<xsl:value-of select="$CoverageId"/>
							</ctl:param>
							<ctl:param name="SCALEFACTOR">2.0</ctl:param>
							<ctl:param name="interpolation">
								<xsl:value-of select="concat($axisLabels[1],':',$InterpolationSupported[1],','$axisLabels[2],':',$InterpolationSupported[1])"/>
							</ctl:param>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="url">http://schemas.opengis.net/wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_not_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req17-->
	<ctl:test name="wcs2:get-int-req17">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req17:Test interpolation-per-axis/getCoverage-xmlpost.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:request>
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:method>post</ctl:method>
							<ctl:header name="Content-type">text/xml</ctl:header>
							<ctl:body>
								<wcs:GetCoverage xmlns:wcs="http://www.opengis.net/wcs/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rsub="http://www.opengis.net/wcs/range-subsetting/1.0" xmlns:scal="http://www.opengis.net/wcs/scaling/1.0" xmlns:int="http://www.opengis.net/wcs/interpolation/1.0" service="WCS" version="2.0.1">
									<wcs:CoverageId>
										<xsl:value-of select="$CoverageId"/>
									</wcs:CoverageId>
									<wcs:Extension>
										<scal:ScaleByFactor>
											<scal:scaleFactor>2.0</scal:scaleFactor>
										</scal:ScaleByFactor>
										<int:Interpolation>
											<int:InterpolationAxes>
												<int:InterpolationAxis>
													<xsl:attribute name="interpolationMethod"><xsl:value-of select="$InterpolationSupported[1]"/></xsl:attribute>
													<xsl:attribute name="axis"><xsl:value-of select="$axisLabels[1]"/></xsl:attribute>
												</int:InterpolationAxis>
												<int:InterpolationAxis>
													<xsl:attribute name="interpolationMethod"><xsl:value-of select="$InterpolationSupported[1]"/></xsl:attribute>
													<xsl:attribute name="axis"><xsl:value-of select="$axisLabels[2]"/></xsl:attribute>
												</int:InterpolationAxis>
											</int:InterpolationAxes>
										</int:Interpolation>
									</wcs:Extension>
								</wcs:GetCoverage>
							</ctl:body>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="resource">wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_not_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req18-->
	<ctl:test name="wcs2:get-int-req18">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req18:Test interpolation-per-axis/getCoverage-soap.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:soap-request version="1.2" charset="UTF-8">
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:body>
								<wcs:GetCoverage xmlns:wcs="http://www.opengis.net/wcs/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rsub="http://www.opengis.net/wcs/range-subsetting/1.0" xmlns:scal="http://www.opengis.net/wcs/scaling/1.0" xmlns:int="http://www.opengis.net/wcs/interpolation/1.0" service="WCS" version="2.0.1">
									<wcs:CoverageId>
										<xsl:value-of select="$CoverageId"/>
									</wcs:CoverageId>
									<wcs:Extension>
										<scal:ScaleByFactor>
											<scal:scaleFactor>2.0</scal:scaleFactor>
										</scal:ScaleByFactor>
										<int:Interpolation>
											<int:InterpolationAxes>
												<int:InterpolationAxis>
													<xsl:attribute name="interpolationMethod"><xsl:value-of select="$InterpolationSupported[1]"/></xsl:attribute>
													<xsl:attribute name="axis"><xsl:value-of select="$axisLabels[1]"/></xsl:attribute>
												</int:InterpolationAxis>
												<int:InterpolationAxis>
													<xsl:attribute name="interpolationMethod"><xsl:value-of select="$InterpolationSupported[1]"/></xsl:attribute>
													<xsl:attribute name="axis"><xsl:value-of select="$axisLabels[2]"/></xsl:attribute>
												</int:InterpolationAxis>
											</int:InterpolationAxes>
										</int:Interpolation>
									</wcs:Extension>
								</wcs:GetCoverage>
							</ctl:body>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="resource">wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:soap-request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_not_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req19-->
	<ctl:test name="wcs2:get-int-req19">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req19:Test interpolation-nearest-neighbor identifier.</ctl:assertion>
		<ctl:code>
			<xsl:if test="not(contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-nearest-neighbor') )">
				<ctl:message>[FAILURE] Send a GetCapabilities request to server under test, verify that the response contains a Profile element with http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-nearest-neighbor.</ctl:message>
				<ctl:fail/>
			</xsl:if>
			<xsl:choose>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_get-kvp/1.0')">
					<ctl:call-test name="wcs2:get-int-kvp">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
						<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/nearest-neighbor"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_post-xml/1.0')">
					<ctl:call-test name="wcs2:get-int-post">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
						<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/nearest-neighbor"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_soap/1.0')">
					<ctl:call-test name="wcs2:get-int-soap">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
						<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/nearest-neighbor"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[FAILURE] no supported protocal extensions.</ctl:message>
					<ctl:fail/>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req21-->
	<ctl:test name="wcs2:get-int-req21">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req21:Test linear identifier.</ctl:assertion>
		<ctl:code>
			<xsl:if test="not(contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-linear') )">
				<ctl:message>[FAILURE] Send a GetCapabilities request to server under test, verify that the response contains a Profile element with http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-linear.</ctl:message>
				<ctl:fail/>
			</xsl:if>
			<xsl:choose>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_get-kvp/1.0')">
					<ctl:call-test name="wcs2:get-int-kvp">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
						<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/linear"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_post-xml/1.0')">
					<ctl:call-test name="wcs2:get-int-post">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
						<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/linear"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_soap/1.0')">
					<ctl:call-test name="wcs2:get-int-soap">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
						<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/linear"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[FAILURE] no supported protocal extensions.</ctl:message>
					<ctl:fail/>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req23-->
	<ctl:test name="wcs2:get-int-req23">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req23:Test interpolation-quadratic identifier.</ctl:assertion>
		<ctl:code>
			<xsl:if test="not(contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-quadratic') )">
				<ctl:message>[FAILURE] Send a GetCapabilities request to server under test, verify that the response contains a Profile element with http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-quadratic.</ctl:message>
				<ctl:fail/>
			</xsl:if>
			<xsl:choose>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_get-kvp/1.0')">
					<ctl:call-test name="wcs2:get-int-kvp">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
						<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/quadratic"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_post-xml/1.0')">
					<ctl:call-test name="wcs2:get-int-post">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
						<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/quadratic"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_soap/1.0')">
					<ctl:call-test name="wcs2:get-int-soap">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
						<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/quadratic"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[FAILURE] no supported protocal extensions.</ctl:message>
					<ctl:fail/>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req25-->
	<ctl:test name="wcs2:get-int-req25">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req25:Test cubic identifier.</ctl:assertion>
		<ctl:code>
			<xsl:if test="not(contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-cubic') )">
				<ctl:message>[FAILURE] Send a GetCapabilities request to server under test, verify that the response contains a Profile element with http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-cubic.</ctl:message>
				<ctl:fail/>
			</xsl:if>
			<xsl:choose>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_get-kvp/1.0')">
					<ctl:call-test name="wcs2:get-int-kvp">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
						<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/cubic"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_post-xml/1.0')">
					<ctl:call-test name="wcs2:get-int-post">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
						<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/cubic"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_soap/1.0')">
					<ctl:call-test name="wcs2:get-int-soap">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
						<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/cubic"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[FAILURE] no supported protocal extensions.</ctl:message>
					<ctl:fail/>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req27-->
	<ctl:test name="wcs2:get-int-req27">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req27:Test interpolation-lost-area identifier.</ctl:assertion>
		<ctl:code>
			<xsl:if test="not(contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-lost-area') )">
				<ctl:message>[FAILURE] Send a GetCapabilities request to server under test, verify that the response contains a Profile element with http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-lost-area.</ctl:message>
				<ctl:fail/>
			</xsl:if>
			<xsl:choose>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_get-kvp/1.0')">
					<ctl:call-test name="wcs2:get-int-kvp">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
						<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/lost-area"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_post-xml/1.0')">
					<ctl:call-test name="wcs2:get-int-post">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
						<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/lost-area"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_soap/1.0')">
					<ctl:call-test name="wcs2:get-int-soap">
						<ctl:with-param name="url" select="$url"/>
						<ctl:with-param name="CoverageId" select="$CoverageId"/>
						<ctl:with-param name="Capabilities" select="$Capabilities"/>
						<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
						<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
						<ctl:with-param name="axisLabels" select="$axisLabels"/>
						<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
						<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/lost-area"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[FAILURE] no supported protocal extensions.</ctl:message>
					<ctl:fail/>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--req29-->
	<ctl:test name="wcs2:get-int-req29">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:assertion>Req29:Test interpolation-barycentric identifier.</ctl:assertion>
		<ctl:code>
			<xsl:if test="not(contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-barycentric') )">
				<ctl:message>[FAILURE] Send a GetCapabilities request to server under test, verify that the response contains a Profile element with  http://www.opengis.net/spec/WCS_service-extension_interpolation/1.0/conf/interpolation-barycentric.</ctl:message>
				<ctl:fail/>
				<xsl:choose>
					<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_get-kvp/1.0')">
						<ctl:call-test name="wcs2:get-int-kvp">
							<ctl:with-param name="url" select="$url"/>
							<ctl:with-param name="CoverageId" select="$CoverageId"/>
							<ctl:with-param name="Capabilities" select="$Capabilities"/>
							<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
							<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
							<ctl:with-param name="axisLabels" select="$axisLabels"/>
							<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
							<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/barycentric"/>
						</ctl:call-test>
					</xsl:when>
					<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_post-xml/1.0')">
						<ctl:call-test name="wcs2:get-int-post">
							<ctl:with-param name="url" select="$url"/>
							<ctl:with-param name="CoverageId" select="$CoverageId"/>
							<ctl:with-param name="Capabilities" select="$Capabilities"/>
							<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
							<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
							<ctl:with-param name="axisLabels" select="$axisLabels"/>
							<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
							<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/barycentric"/>
						</ctl:call-test>
					</xsl:when>
					<xsl:when test="contains(string-join(($Capabilities//*[local-name()='ServiceIdentification']/*[local-name()='Profile']),' '), 'http://www.opengis.net/spec/WCS_protocol-binding_soap/1.0')">
						<ctl:call-test name="wcs2:get-int-soap">
							<ctl:with-param name="url" select="$url"/>
							<ctl:with-param name="CoverageId" select="$CoverageId"/>
							<ctl:with-param name="Capabilities" select="$Capabilities"/>
							<ctl:with-param name="SupportsGML" select="$SupportsGML"/>
							<ctl:with-param name="DescribeCoverage" select="$DescribeCoverage"/>
							<ctl:with-param name="axisLabels" select="$axisLabels"/>
							<ctl:with-param name="InterpolationSupported" select="$InterpolationSupported"/>
							<ctl:with-param name="interpolationMethod" select="http://www.opengis.net/def/interpolation/OGC/1/barycentric"/>
						</ctl:call-test>
					</xsl:when>
					<xsl:otherwise>
						<ctl:message>[FAILURE] no supported protocal extensions.</ctl:message>
						<ctl:fail/>
					</xsl:otherwise>
				</xsl:choose>
			</xsl:if>
		</ctl:code>
	</ctl:test>
	<!--kvp-->
	<ctl:test name="wcs2:get-int-kvp">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:param name="interpolationMethod"/>
		<ctl:assertion>Test request in kvp.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:request>
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:method>get</ctl:method>
							<ctl:param name="SERVICE">WCS</ctl:param>
							<ctl:param name="VERSION">2.0.1</ctl:param>
							<ctl:param name="REQUEST">GetCoverage</ctl:param>
							<ctl:param name="CoverageId">
								<xsl:value-of select="$CoverageId"/>
							</ctl:param>
							<ctl:param name="SCALEFACTOR">2.0</ctl:param>
							<ctl:param name="InterpolationMethod">
								<xsl:value-of select="$interpolationMethod"/>
							</ctl:param>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="url">http://schemas.opengis.net/wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_not_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--post-->
	<ctl:test name="wcs2:get-int-post">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:param name="interpolationMethod"/>
		<ctl:assertion>Test request in post.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:request>
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:method>post</ctl:method>
							<ctl:header name="Content-type">text/xml</ctl:header>
							<ctl:body>
								<wcs:GetCoverage xmlns:wcs="http://www.opengis.net/wcs/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rsub="http://www.opengis.net/wcs/range-subsetting/1.0" xmlns:scal="http://www.opengis.net/wcs/scaling/1.0" xmlns:int="http://www.opengis.net/wcs/interpolation/1.0" service="WCS" version="2.0.1">
									<wcs:CoverageId>
										<xsl:value-of select="$CoverageId"/>
									</wcs:CoverageId>
									<wcs:Extension>
										<scal:ScaleByFactor>
											<scal:scaleFactor>2.0</scal:scaleFactor>
										</scal:ScaleByFactor>
										<int:Interpolation>
											<int:InterpolationMethod>
												<xsl:attribute name="interpolationMethod"><xsl:value-of select="$interpolationMethod"/></xsl:attribute>
											</int:InterpolationMethod>
										</int:Interpolation>
									</wcs:Extension>
								</wcs:GetCoverage>
							</ctl:body>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="resource">wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_not_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
	<!--soap-->
	<ctl:test name="wcs2:get-int-soap">
		<ctl:param name="url"/>
		<ctl:param name="Capabilities"/>
		<ctl:param name="DescribeCoverage"/>
		<ctl:param name="CoverageId"/>
		<ctl:param name="SupportsGML"/>
		<ctl:param name="InterpolationSupported"/>
		<ctl:param name="axisLabels"/>
		<ctl:param name="interpolationMethod"/>
		<ctl:assertion>Test request in soap.</ctl:assertion>
		<ctl:code>
			<xsl:choose>
				<xsl:when test="$SupportsGML = 'true'">
					<xsl:variable name="GetCoverage">
						<ctl:soap-request version="1.2" charset="UTF-8">
							<ctl:url>
								<xsl:value-of select="$url"/>
							</ctl:url>
							<ctl:body>
								<wcs:GetCoverage xmlns:wcs="http://www.opengis.net/wcs/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rsub="http://www.opengis.net/wcs/range-subsetting/1.0" xmlns:scal="http://www.opengis.net/wcs/scaling/1.0" xmlns:int="http://www.opengis.net/wcs/interpolation/1.0" service="WCS" version="2.0.1">
									<wcs:CoverageId>
										<xsl:value-of select="$CoverageId"/>
									</wcs:CoverageId>
									<wcs:Extension>
										<scal:ScaleByFactor>
											<scal:scaleFactor>2.0</scal:scaleFactor>
										</scal:ScaleByFactor>
										<int:Interpolation>
											<int:InterpolationMethod>
												<xsl:attribute name="interpolationMethod"><xsl:value-of select="$interpolationMethod"/></xsl:attribute>
											</int:InterpolationMethod>
										</int:Interpolation>
									</wcs:Extension>
								</wcs:GetCoverage>
							</ctl:body>
							<ctlp:XMLValidatingParser>
								<ctlp:schemas>
									<ctlp:schema type="resource">wcs/2.0/wcsAll.xsd</ctlp:schema>
								</ctlp:schemas>
							</ctlp:XMLValidatingParser>
						</ctl:soap-request>
					</xsl:variable>
					<ctl:call-test name="wcs2:GetCoverage_not_exception">
						<ctl:with-param name="GetCoverage" select="$GetCoverage"/>
					</ctl:call-test>
				</xsl:when>
				<xsl:otherwise>
					<ctl:message>[MESSAGE] The server does not support the gml coverage.</ctl:message>
				</xsl:otherwise>
			</xsl:choose>
		</ctl:code>
	</ctl:test>
</ctl:package>

